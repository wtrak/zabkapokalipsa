<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>≈ªappkapokalipsa</title>
  <style>
    body {
      font-family: 'Courier New', monospace;
      background-color: #ffffff;
      color: #004d00;
      max-width: 700px;
      margin: 40px auto;
      padding: 20px;
      border: 4px solid #009933;
      border-radius: 10px;
    }
    h1 {
      text-align: center;
      color: #009933;
    }
    .language-toggle {
      text-align: center;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    .item-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .item-grid label {
      flex: 1 1 30%;
      cursor: pointer;
      background: #e6ffe6;
      border: 2px solid #009933;
      padding: 8px;
      border-radius: 5px;
    }
    button {
      margin-top: 20px;
      padding: 10px;
      width: 100%;
      background-color: #009933;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
    }
    #result {
      margin-top: 30px;
      font-size: 18px;
      font-weight: bold;
      text-align: center;
    }
    .ad-space {
      margin: 20px 0;
      background: #d9ffd9;
      text-align: center;
      padding: 10px;
      border: 2px dashed #009933;
    }
  </style>
</head>
<body>
  <h1>≈ªappkapokalipsa</h1>

  <div class="language-toggle">
    <button onclick="switchLang('pl')">PL</button>
    <button onclick="switchLang('en')">EN</button>
  </div>

  <form id="gameForm">
    <label id="selectPrompt">Wybierz 10 produkt√≥w z ≈ªabki na przetrwanie:</label>
    <div class="item-grid" id="items"></div>
    <div class="ad-space">[Reklama Google AdSense tutaj]</div>
    <button type="submit">Sprawd≈∫ ile prze≈ºyjesz</button>
  </form>

  <div id="result"></div>

  <script>
    const labels = {
      pl: {
        hotdog: "Mistrz Hot Doga",
        kabanosy: "Kabanosowy Kr√≥l",
        pierogi: "Pierogowy Przetrwalec",
        vodka: "W√≥dczany Wizjoner",
        water: "Hydro Bohater",
        tech: "Techno ≈ªyjƒÖcy",
        hygiene: "Apokaliptyczny Sanitarnik",
        sweets: "Cukrowy Strateg",
        sauce: "Czosnkowy Czarodziej",
        sandwich: "Kanapkowy Kurier"
      },
      en: {
        hotdog: "Hot Dog Master",
        kabanosy: "Kabanos King",
        pierogi: "Pierogi Prepper",
        vodka: "Vodka Visionary",
        water: "Hydration Hero",
        tech: "Tech Survivor",
        hygiene: "Apocalypse Sanitizer",
        sweets: "Candy Strategist",
        sauce: "Garlic Wizard",
        sandwich: "Sandwich Operator"
      }
    };

    const lang = {
      pl: {
        prompt: "Wybierz 10 produkt√≥w z ≈ªabki na przetrwanie:",
        button: "Sprawd≈∫ ile prze≈ºyjesz",
        survived: d => `Prze≈ºy≈Çe≈õ ${d} dni w ≈ªappkapokalipsie!`,
        share: d => `Prze≈ºy≈Çem ${d} dni w ≈ªappkapokalipsie! Sprawd≈∫ ile Ty dasz radƒô!`
      },
      en: {
        prompt: "Pick 10 items from ≈ªabka to survive:",
        button: "Check how long you'd survive",
        survived: d => `You survived ${d} days in the ≈ªappkapocalypse!`,
        share: d => `I survived ${d} days in the ≈ªappkapocalypse! See if you can beat me!`
      }
    };

    let currentLang = 'pl';

    function switchLang(l) {
      currentLang = l;
      document.getElementById("selectPrompt").textContent = lang[l].prompt;
      document.querySelector("button[type=submit]").textContent = lang[l].button;
    }

    const items = [
      { name: 'Hot dog', points: 2, tag: 'hotdog' },
      { name: 'Kabanosy', points: 3, tag: 'kabanosy' },
      { name: 'Tiger Energy Drink', points: 1, tag: 'energy' },
      { name: 'Woda ≈ªywiec Zdr√≥j', points: 3, tag: 'water' },
      { name: 'Redbull', points: 2, tag: 'energy' },
      { name: 'Zupa instant', points: 2, tag: 'soup' },
      { name: 'Kanapka ≈ªabka', points: 2, tag: 'sandwich' },
      { name: 'Ma≈Çpka w√≥dki', points: 1, tag: 'vodka' },
      { name: 'Batony Kinder/Grze≈õki', points: 1, tag: 'sweets' },
      { name: 'Szczoteczka i pasta', points: 2, tag: 'hygiene' },
      { name: 'Lighter', points: 2, tag: 'tool' },
      { name: 'Pierogi mro≈ºone', points: 2, tag: 'pierogi' },
      { name: 'Jogurt Fantasia', points: 1, tag: 'dairy' },
      { name: 'Lody Ekipy', points: 0, tag: 'icecream' },
      { name: 'Paluszki', points: 1, tag: 'snacks' },
      { name: 'Wafle ry≈ºowe', points: 1, tag: 'snacks' },
      { name: 'Piwo Harnas', points: 1, tag: 'beer' },
      { name: '≈ªel antybakteryjny', points: 2, tag: 'hygiene' },
      { name: 'Bag of ice', points: 0, tag: 'ice' },
      { name: 'Powerbank', points: 3, tag: 'tech' },
      { name: 'Chrupki cebulowe', points: 1, tag: 'snacks' },
      { name: 'Sos czosnkowy', points: 0, tag: 'sauce' },
      { name: 'Ketchup Pikantny', points: 0, tag: 'sauce' },
      { name: 'Kropla Beskidu', points: 3, tag: 'water' },
      { name: 'Mleko 2%', points: 1, tag: 'dairy' }
    ];

    const container = document.getElementById('items');
    items.forEach((item, i) => {
      const id = `item-${i}`;
      container.innerHTML += `<label><input type='checkbox' name='item' value='${item.points}' data-tag='${item.tag}' id='${id}'> ${item.name}</label>`;
    });

    document.getElementById('gameForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const selected = Array.from(document.querySelectorAll("input[name='item']:checked"));
      if (selected.length !== 10) {
        alert(currentLang === 'pl' ? 'Musisz wybraƒá dok≈Çadnie 10 przedmiot√≥w!' : 'You must choose exactly 10 items!');
        return;
      }

      const total = selected.reduce((sum, el) => sum + parseInt(el.value), 0);
      const tagCounts = {};
      const selectedTags = [];

      selected.forEach(el => {
        const tag = el.getAttribute('data-tag');
        tagCounts[tag] = (tagCounts[tag] || 0) + 1;
        selectedTags.push(tag);
      });

      const mostCommonTag = Object.entries(tagCounts).sort((a, b) => b[1] - a[1])[0][0];
      const label = labels[currentLang][mostCommonTag] || '';

      let days = total * 3;
      if (tagCounts['water'] >= 2) days += 2;
      if (tagCounts['tech']) days += 1;
      if (tagCounts['vodka'] >= 2) days -= 2;
      if (tagCounts['ice']) days -= 1;
      if (tagCounts['hotdog'] >= 3) days -= 1;

      const comboOutcomes = [
        {
          tags: ['vodka', 'lighter'],
          pl: 'Pr√≥bowa≈Çe≈õ rozpaliƒá ognisko w√≥dƒÖ. Zadzia≈Ça≈Ço. Zbyt dobrze.',
          en: 'You tried to start a fire with vodka. It worked. Too well.'
        },
        {
          tags: ['pierogi', 'sauce'],
          pl: 'Twoje pierogi z czosnkowym zosta≈Çy uznane za walutƒô w postapokalipsie.',
          en: 'Your pierogi with garlic sauce became currency in the wasteland.'
        },
        {
          tags: ['tech', 'sandwich'],
          pl: 'U≈ºy≈Çe≈õ powerbanka do podgrzania kanapki. Kreatywno≈õƒá 10/10.',
          en: 'You used a powerbank to warm up your sandwich. Innovation at its peak.'
        }
      ];

      let funnyEnding = '';
      for (let combo of comboOutcomes) {
        if (combo.tags.every(t => selectedTags.includes(t))) {
          funnyEnding = combo[currentLang];
          break;
        }
      }
      if (!funnyEnding) {
        const fallbackOutcomes = {
          pl: [
            'Zjad≈Çe≈õ wszystkie kabanosy i zapomnia≈Çe≈õ o wodzie. Nie przetrwa≈Çe≈õ.',
            'Twoje zakupy by≈Çy smaczne, ale bezu≈ºyteczne. Umar≈Çe≈õ syty.',
            'Zrobi≈Çe≈õ z ≈ºelu antybakteryjnego sos. ≈ªa≈Çujesz.',
            'Wszystko posz≈Ço dobrze... dop√≥ki nie roz≈Çadowa≈Ç siƒô powerbank.'
          ],
          en: [
            'You ate all the kabanosy and forgot water. You didn‚Äôt make it.',
            'Your groceries were tasty but useless. You died full and happy.',
            'You turned hand sanitizer into sauce. Regret was instant.',
            'Everything went fine‚Ä¶ until the powerbank died.'
          ]
        };
        const options = fallbackOutcomes[currentLang];
        funnyEnding = options[Math.floor(Math.random() * options.length)];
      }

      const message = lang[currentLang].survived(days);
      const shareText = lang[currentLang].share(days);
      const url = encodeURIComponent(window.location.href);
      const text = encodeURIComponent(shareText);

      document.getElementById('result').innerHTML = `
        <p>${message}</p>
        <p><em>${label ? 'üéñ ' + label : ''}</em></p>
        <p>${funnyEnding}</p>
        <div style="margin-top:10px">
          <a href="https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}" target="_blank">Facebook</a> |
          <a href="https://twitter.com/intent/tweet?text=${text}&url=${url}" target="_blank">Twitter</a> |
          <a href="https://wa.me/?text=${text}%20${url}" target="_blank">WhatsApp</a>
        </div>
        <div class="ad-space">[Reklama Google AdSense tutaj]</div>
      `;
    });
  </script>
</body>
</html>
